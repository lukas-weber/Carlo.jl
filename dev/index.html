<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Carlo.jl · Carlo.jl</title><meta name="title" content="Carlo.jl · Carlo.jl"/><meta property="og:title" content="Carlo.jl · Carlo.jl"/><meta property="twitter:title" content="Carlo.jl · Carlo.jl"/><meta name="description" content="Documentation for Carlo.jl."/><meta property="og:description" content="Documentation for Carlo.jl."/><meta property="twitter:description" content="Documentation for Carlo.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="Carlo.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Carlo.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href="index.html">Carlo.jl</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li><li><a class="tocitem" href="#Shortcuts"><span>Shortcuts</span></a></li></ul></li><li><a class="tocitem" href="abstract_mc.html">Implementing your algorithm</a></li><li><span class="tocitem">Advanced Topics</span><ul><li><a class="tocitem" href="evaluables.html">Evaluables</a></li><li><a class="tocitem" href="jobtools.html">JobTools</a></li><li><a class="tocitem" href="resulttools.html">ResultTools</a></li><li><a class="tocitem" href="rng.html">Random Number Generators</a></li><li><a class="tocitem" href="parallel_run_mode.html">Parallel run mode</a></li></ul></li><li><span class="tocitem">Extras</span><ul><li><a class="tocitem" href="parallel_tempering.html">Parallel tempering</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="index.html">Carlo.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="index.html">Carlo.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/lukas-weber/Carlo.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/lukas-weber/Carlo.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Carlo.jl"><a class="docs-heading-anchor" href="#Carlo.jl">Carlo.jl</a><a id="Carlo.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Carlo.jl" title="Permalink"></a></h1><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>Carlo is a framework that aims to simplify the implementation of high-performance Monte Carlo codes by handling the parallelization, checkpointing and error analysis. What sets it apart is a focus on ease of use and minimalism.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Installation is simple via the Julia REPL.</p><pre><code class="language-julia hljs">] add Carlo</code></pre><p>If you wish to use the system MPI implementation, take a look at the <a href="https://juliaparallel.org/MPI.jl/stable/configuration/#using_system_mpi">MPI.jl documentation</a> and be aware that in that case also the system binary of HDF5 as described <a href="https://juliaio.github.io/HDF5.jl/stable/#Using-custom-or-system-provided-HDF5-binaries">here</a>!</p><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p>In order to work with Carlo, a Monte Carlo algorithm has to implement the <a href="abstract_mc.html#abstract_mc">AbstractMC</a> interface. A full example of this is given in the reference implementation for the <a href="https://github.com/lukas-weber/Ising.jl">Ising</a> model.</p><p>Then, to perform simulation, one writes a <em>job script</em> defining all the parameters needed for the simulation, which could look something like the following.</p><pre><code class="language-julia hljs">#!/usr/bin/env julia

using Carlo
using Carlo.JobTools
using Ising

tm = TaskMaker()
tm.sweeps = 10000
tm.thermalization = 2000
tm.binsize = 100

tm.Lx = 10
tm.Ly = 10

Ts = range(0.1, 4, length=20)
for T in Ts
    task(tm; T=T)
end

job = JobInfo(@__FILE__, Ising.MC;
    checkpoint_time=&quot;30:00&quot;,
    run_time=&quot;15:00&quot;,
    tasks=make_tasks(tm)
)

start(job, ARGS)</code></pre><p>This example starts a simulation for the Ising model on the 10×10 lattice for 20 different temperatures. Using the function <a href="jobtools.html#Carlo.start-Tuple{JobInfo, AbstractVector{&lt;:AbstractString}}"><code>start(job::JobInfo, ARGS)</code></a> enables the Carlo CLI when we  execute the script above as follows.</p><pre><code class="language-bash hljs">./myjob --help</code></pre><p>The command line interface allows (re)starting a job, merging preliminary results, and showing the completion status of a calculation.</p><h3 id="Starting-jobs"><a class="docs-heading-anchor" href="#Starting-jobs">Starting jobs</a><a id="Starting-jobs-1"></a><a class="docs-heading-anchor-permalink" href="#Starting-jobs" title="Permalink"></a></h3><pre><code class="language-bash hljs">./myjob run</code></pre><p>This will start a simulation on a single core. To use multiple cores, use MPI.</p><pre><code class="language-bash hljs">mpirun -n $num_cores ./myjob run</code></pre><p>Once the simulation is started, a directory <code>myjob.data</code> will be created to store all simulation data. The name of the directory corresponds to the first argument of <code>JobInfo</code>. Usually that will be <code>@__FILE__</code>, but you could also collect your simulation data in a different directory.</p><p>The data directory will contain hdf5 files for each task of the job that contain checkpointing snapshots and measurement results. Once the job is done, Carlo will average the measurement data for you and produce the file <code>myjob.results.json</code> in the same directory as the <code>myjob.data</code> directory. This file contains means and errorbars of all observables. See <a href="resulttools.html#result_tools">ResultTools</a> for some tips on consuming this file back into julia for your plotting or other postprocessing.</p><h3 id="Job-status"><a class="docs-heading-anchor" href="#Job-status">Job status</a><a id="Job-status-1"></a><a class="docs-heading-anchor-permalink" href="#Job-status" title="Permalink"></a></h3><pre><code class="language-bash hljs">./myjob status</code></pre><p>Use this command to find out the state of the simulation. It will show a table with the number of completed measurement sweeps, the target number of sweeps, the numbers of runs, and the fraction of them that is thermalized.</p><p>The fraction is defined as thermalization sweeps completed/total thermalization sweeps needed.</p><h3 id="Merging-jobs"><a class="docs-heading-anchor" href="#Merging-jobs">Merging jobs</a><a id="Merging-jobs-1"></a><a class="docs-heading-anchor-permalink" href="#Merging-jobs" title="Permalink"></a></h3><pre><code class="language-bash hljs">./myjob merge</code></pre><p>Usually Carlo will automatically merge results once a job is complete, but when you are impatient and you want to check on results of a running or aborted job, this command is your friend. It will produce a <code>myjob.results.json</code> file containing the averages of the currently available data.</p><h3 id="Deleting-jobs"><a class="docs-heading-anchor" href="#Deleting-jobs">Deleting jobs</a><a id="Deleting-jobs-1"></a><a class="docs-heading-anchor-permalink" href="#Deleting-jobs" title="Permalink"></a></h3><pre><code class="language-bash hljs">./myjob delete</code></pre><p>This deletes <code>myjob.data</code> and <code>myjob.results.json</code>. Of course, you should archive your simulation data instead of deleting them. However, if you made an error in a previous simulation, keep in mind that by default Carlo will continue it from the checkpoints.</p><p>For that case of restarting a job there is a handy shortcut as well</p><pre><code class="language-bash hljs">./myjob run --restart</code></pre><h2 id="Shortcuts"><a class="docs-heading-anchor" href="#Shortcuts">Shortcuts</a><a id="Shortcuts-1"></a><a class="docs-heading-anchor-permalink" href="#Shortcuts" title="Permalink"></a></h2><p>All commands here have shortcut versions that you can view in the help.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="abstract_mc.html">Implementing your algorithm »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.9.0 on <span class="colophon-date" title="Friday 28 March 2025 18:15">Friday 28 March 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
